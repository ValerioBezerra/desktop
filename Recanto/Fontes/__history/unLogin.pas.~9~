unit unLogin;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.Imaging.pngimage, Vcl.ExtCtrls,
  Vcl.StdCtrls, Vcl.Imaging.jpeg;

type
  TfrmLogin = class(TForm)
    edNomeUsuario: TEdit;
    Label1: TLabel;
    edCodUsuario: TEdit;
    Image1: TImage;
    edSenhaUsuario: TEdit;
    Label2: TLabel;
    Image2: TImage;
    Image3: TImage;
    Image4: TImage;
    procedure Image1Click(Sender: TObject);
    procedure edCodUsuarioExit(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmLogin: TfrmLogin;

implementation

{$R *.dfm}

uses unDM, unConsUSUARIO;

procedure TfrmLogin.edCodUsuarioExit(Sender: TObject);
begin
     with DataModule1.cdsCONSULTA do
     begin
       close;
       CommandText := 'select * from usuario where codigo_usu = ' + edCodUsuario.Text;
       Open;
       if not IsEmpty then
          edNomeUsuario.Text := FieldByName('NOME_USU').AsString
       else
           edNomeUsuario.Text  := 'Usuário não cadastrado';
     end;
end;

procedure TfrmLogin.Image1Click(Sender: TObject);
begin
     Application.CreateForm(TForm1,Form1);
     Form1.ShowModal;
     if not DataModule1.cdsUSUARIO.IsEmpty then
     begin
          edCodUsuario.Text := DataModule1.cdsUSUARIO.FieldByName('CODIGO_USU').AsString;
          edCodUsuarioExit(Self);
          edSenhaUsuario.SetFocus;
     end;
end;

end.
